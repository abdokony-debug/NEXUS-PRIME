name: ğŸš€ ØªØ´ØºÙŠÙ„ WAHAB System
on:
  workflow_dispatch:
    inputs:
      mode:
        description: 'Ù†ÙˆØ¹ Ø§Ù„ØªØ´ØºÙŠÙ„'
        required: true
        default: 'platforms'
        type: choice
        options:
          - platforms
          - users
          - test
      batch_size:
        description: 'Ø­Ø¬Ù… Ø§Ù„Ø¯ÙØ¹Ø©'
        required: true
        default: '5'
        type: string

jobs:
  run-system:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙƒÙˆØ¯
        uses: actions/checkout@v4
      
      - name: âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯ Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
      
      - name: ğŸ“¦ ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª
        run: npm install
      
      - name: ğŸš€ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…
        run: |
          echo "Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù†Ø¸Ø§Ù…..."
          node src/index.js \
            --mode "${{ github.event.inputs.mode || 'platforms' }}" \
            --batch-size "${{ github.event.inputs.batch_size || '5' }}"
        env:
          GOOGLE_SHEET_URL: ${{ secrets.GOOGLE_SHEET_URL }}
          GOOGLE_CLIENT_EMAIL: ${{ secrets.GOOGLE_CLIENT_EMAIL }}
          GOOGLE_PRIVATE_KEY: ${{ secrets.GOOGLE_PRIVATE_KEY }}
      
      - name: âœ… Ø§Ù„ØªØ£ÙƒÙŠØ¯
        run: echo "âœ… ØªÙ… Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­"
