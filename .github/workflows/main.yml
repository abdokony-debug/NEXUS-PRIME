name: Wahab Stealth v10 âœ…
on:
  schedule: - cron: '*/30 * * * *'
  workflow_dispatch:

jobs:
  stealth:
    runs-on: ubuntu-latest
    timeout-minutes: 25
    steps:
    - uses: actions/checkout@0ad4b8fadaa221de15dcec353f45205ec38ea70b
    
    - uses: actions/setup-node@1e60f620b9541f168136bd8d9b1115e8497a4508
      with: { node-version: 20 }
      
    - name: ğŸ“ Create directories
      run: mkdir -p evidences screenshots sessions logs
      
    - name: ğŸ“¦ Install dependencies
      run: npm ci --no-audit
      
    - name: ğŸ§¹ Install Playwright Chromium âœ…
      run: |
        npx playwright install --with-deps chromium
        npx playwright install-deps
        
    - name: ğŸš€ Run Stealth Engine
      run: node index.js
      env:
        SHEET_URL: ${{ secrets.SHEET_URL }}
        
    - name: ğŸ“¤ Upload Results
      if: always()
      uses: actions/upload-artifact@0b7f0a8d9377b7f7dd32b4fd8d0d095a4e3a2002
      with:
        name: wahab-results-${{ github.run_id }}
        path: |
          evidences/
          mission_log.txt
          screenshots/
