name: WAHAB AI System

on:
  workflow_dispatch:
    inputs:
      mode:
        description: 'Processing mode'
        required: true
        default: 'intelligent'
        type: choice
        options:
          - intelligent
          - fast
          - stealth
      batch_size:
        description: 'Number of accounts to create'
        required: true
        default: '3'
        type: string
      learning_enabled:
        description: 'Enable AI learning'
        required: true
        default: 'true'
        type: boolean

jobs:
  run-system:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '18'

      - name: Install dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y wget ca-certificates
          npm install
          npx playwright install chromium

      - name: Create directories
        run: |
          mkdir -p results screenshots logs src

      - name: Run AI System
        run: |
          echo "ğŸš€ Starting WAHAB AI System"
          echo "Mode: ${{ github.event.inputs.mode }}"
          echo "Batch: ${{ github.event.inputs.batch_size }}"
          echo "Learning: ${{ github.event.inputs.learning_enabled }}"
          
          # Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù„Ù Ø¨Ø³ÙŠØ· Ù„Ù„ØªØ¬Ø±Ø¨Ø©
          cat > test-run.js << 'END'
const fs = require('fs');
console.log('âœ… WAHAB AI System Started');
console.log('Mode: ${{ github.event.inputs.mode }}');
console.log('Batch: ${{ github.event.inputs.batch_size }}');

// Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…
const results = {
  success: true,
  accounts: 3,
  timestamp: new Date().toISOString()
};

fs.writeFileSync('results/test.json', JSON.stringify(results, null, 2));
console.log('ğŸ“Š Results saved');
END
          
          node test-run.js
        env:
          TEST_MODE: test

      - name: Upload results
        uses: actions/upload-artifact@v4
        with:
          name: results
          path: results/
